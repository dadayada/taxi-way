{"version":3,"sources":["core/constants.js","screens/add-record/store.js","screens/add-record/view.js","persistence.js","core/records.js","screens/home.js","components/bottom-navigation.js","screens/history.js","routes.js","app.js","index.js"],"names":["RECORD_TYPE","INCOME","EXPENSE","recordTypeChanged","createEvent","recordValueChanged","recordPushed","$type","createStore","on","_","p","$recordValue","recordPushRequested","sample","combine","type","value","Number","store","_objectSpread","added","Date","toISOString","watch","history","push","reset","useStyles","makeStyles","theme","root","width","button","margin","concat","spacing","AddRecordScreen","recordType","useStore","recordValue","classes","react_default","a","createElement","FormControl","className","Typography","align","variant","FormLabel","component","RadioGroup","onChange","e","target","FormControlLabel","control","Radio","label","TextField","placeholder","Button","color","onClick","localStorageKey","removeRecord","$records","JSON","parse","window","localStorage","getItem","s","Object","toConsumableArray","filter","el","data","setItem","stringify","$totalIncome","map","records","record","reduce","acc","$totalExpenses","$profit","incomeText","green","fontWeight","spendingText","red","HomePage","totalIncome","totalExpenses","profit","Grid","container","item","xs","Box","display","justifyContent","alignItems","position","bottom","BottomNavigation","showLabels","BottomNavigationAction","icon","Home","Link","to","PostAdd","History","HistoryScreen","key","toLocaleDateString","toLocaleTimeString","Divider","createBrowserHistory","Routes","react_router","baseName","process","exact","path","bottom_navigation_BottomNavigation","overflow","padding","App","routes_Routes","rootElement","document","getElementById","createMuiTheme","ReactDOM","render","ThemeProvider"],"mappings":"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","file":"static/js/main.89a471f7.chunk.js","sourcesContent":["export const RECORD_TYPE = {\n  INCOME: 'INCOME',\n  EXPENSE: 'EXPENSE'\n};","import { createStore, createEvent, sample, combine } from 'effector';\nimport { history } from '../../routes';\nimport { RECORD_TYPE } from '../../core/constants';\n\nconst recordTypeChanged = createEvent();\nconst recordValueChanged = createEvent();\nconst recordPushed = createEvent();\n\nconst $type = createStore(RECORD_TYPE.INCOME).on(\n  recordTypeChanged,\n  (_, p) => p\n);\n\nconst $recordValue = createStore('').on(recordValueChanged, (_, p) => p);\n\nconst recordPushRequested = sample(\n  combine($type, $recordValue, (type, value) => ({ type, value: Number(value) })),\n  recordPushed,\n  store => ({ ...store, added: new Date().toISOString() })\n);\n\nrecordPushRequested.watch(() => history.push('/'));\n\n$type.reset(recordPushRequested);\n$recordValue.reset(recordPushRequested);\n\nexport {\n  recordTypeChanged,\n  recordValueChanged,\n  recordPushed,\n  $type,\n  $recordValue,\n  recordPushRequested\n};\n","import React from 'react';\nimport {\n  RadioGroup,\n  Radio,\n  FormControl,\n  FormLabel,\n  FormControlLabel,\n  TextField,\n  Button,\n  Typography\n} from '@material-ui/core';\nimport { useStore } from 'effector-react';\nimport {\n  $type,\n  recordTypeChanged,\n  $recordValue,\n  recordValueChanged,\n  recordPushed\n} from './store';\nimport { RECORD_TYPE } from '../../core/constants';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n  },\n  button: {\n    margin: `${theme.spacing() * 2}px 0px`\n  }\n}));\n\nexport function AddRecordScreen() {\n  const recordType = useStore($type);\n  const recordValue = useStore($recordValue);\n  const classes = useStyles();\n  return (\n    <FormControl className={classes.root}>\n      <Typography align=\"center\" variant=\"h4\">New record</Typography>\n      <FormLabel component=\"legend\">Type</FormLabel>\n      <RadioGroup\n        value={recordType}\n        onChange={e => recordTypeChanged(e.target.value)}\n      >\n        <FormControlLabel\n          control={<Radio />}\n          value={RECORD_TYPE.INCOME}\n          label=\"Income\"\n        />\n        <FormControlLabel\n          control={<Radio />}\n          value={RECORD_TYPE.EXPENSE}\n          label=\"Expense\"\n        />\n      </RadioGroup>\n      <TextField\n        label=\"Value\"\n        placeholder=\"Enter value\"\n        type=\"number\"\n        value={recordValue}\n        onChange={e => recordValueChanged(e.target.value)}\n      />\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={recordPushed}\n        className={classes.button}\n      >\n        Add\n      </Button>\n    </FormControl>\n  );\n}\n","const localStorageKey = 'taxi-data';\n\nexport function addDataToLocalStorage(data) {\n  window.localStorage.setItem(localStorageKey, JSON.stringify(data));\n}\n\nexport function getDataFromLocalStorage() {\n  return JSON.parse(window.localStorage.getItem(localStorageKey)) || [];\n}\n","import { createStore, createEvent } from 'effector';\nimport { recordPushRequested } from '../screens/add-record';\nimport { RECORD_TYPE } from './constants';\nimport { addDataToLocalStorage, getDataFromLocalStorage } from '../persistence';\n\nconst removeRecord = createEvent();\n\n/*\n  type Record {\n    added: string,\n    type: 'INCOME' | 'EXPENSE',\n    value: number\n  }\n*/\n\nexport const $records = createStore(getDataFromLocalStorage())\n  .on(recordPushRequested, (s, p) => [...s, p])\n  .on(removeRecord, (s, p) => s.filter(el => el.added !== p.added));\n\n$records.watch(addDataToLocalStorage);\n\nexport const $totalIncome = $records.map(records =>\n  records\n    .filter(record => record.type === RECORD_TYPE.INCOME)\n    .reduce((acc, record) => record.value + acc, 0)\n);\n\nexport const $totalExpenses = $records.map(records =>\n  records\n    .filter(record => record.type === RECORD_TYPE.EXPENSE)\n    .reduce((acc, record) => record.value + acc, 0)\n);\n\nexport const $profit = $records.map(records =>\n  records.reduce(\n    (acc, record) =>\n      record.type === RECORD_TYPE.INCOME\n        ? acc + record.value\n        : acc - record.value,\n    0\n  )\n);\n","import React from 'react';\nimport { makeStyles } from '@material-ui/styles';\nimport { Typography, Box, Grid } from '@material-ui/core';\nimport { green, red } from '@material-ui/core/colors';\nimport { useStore } from 'effector-react';\n\nimport { $totalExpenses, $totalIncome, $profit } from '../core/records';\n\nconst useStyles = makeStyles(theme => ({\n  incomeText: {\n    color: green[700],\n    fontWeight: 'bold'\n  },\n  spendingText: {\n    color: red[700],\n    fontWeight: 'bold'\n  }\n}));\n\nexport function HomePage() {\n  const classes = useStyles();\n  const totalIncome = useStore($totalIncome);\n  const totalExpenses = useStore($totalExpenses);\n  const profit = useStore($profit);\n  return (\n    <Grid container>\n      <Grid item xs={4}>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n          <Typography align=\"center\" variant=\"subtitle1\">\n            Income\n          </Typography>\n        </Box>\n        <Typography className={classes.incomeText} align=\"center\" variant=\"h4\">\n          {totalIncome}\n        </Typography>\n      </Grid>\n      <Grid item xs={4}>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n          <Typography align=\"center\" variant=\"subtitle1\">\n            Expenses\n          </Typography>\n        </Box>\n        <Typography\n          className={classes.spendingText}\n          align=\"center\"\n          variant=\"h4\"\n        >\n          {totalExpenses}\n        </Typography>\n      </Grid>\n      <Grid item xs={4}>\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n          <Typography align=\"center\" variant=\"subtitle1\">\n            Profit\n          </Typography>\n        </Box>\n        <Typography\n          className={profit > 0 ? classes.incomeText : classes.spendingText}\n          align=\"center\"\n          variant=\"h4\"\n        >\n          {profit}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  BottomNavigation as MUIBottomNavigation,\n  BottomNavigationAction\n} from '@material-ui/core';\nimport { PostAdd, History, Home } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/styles';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    position: 'fixed',\n    bottom: 0,\n    width: '100%'\n  }\n}));\n\nexport function BottomNavigation() {\n  const classes = useStyles();\n  return (\n    <MUIBottomNavigation value={0} showLabels className={classes.root}>\n      <BottomNavigationAction\n        label=\"Main\"\n        icon={<Home />}\n        component={Link}\n        to=\"/\"\n      />\n      <BottomNavigationAction\n        label=\"New record\"\n        icon={<PostAdd />}\n        component={Link}\n        to=\"add-record\"\n      />\n      <BottomNavigationAction\n        label=\"History\"\n        icon={<History />}\n        component={Link}\n        to=\"history\"\n      />\n    </MUIBottomNavigation>\n  );\n}\n","import React from 'react';\nimport { $records } from '../core/records';\nimport { useStore } from 'effector-react';\nimport { Typography, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/styles';\nimport { green, red } from '@material-ui/core/colors';\nimport { RECORD_TYPE } from '../core/constants';\n\nconst useStyles = makeStyles(theme => ({\n  incomeText: {\n    color: green[700],\n    fontWeight: 'bold'\n  },\n  spendingText: {\n    color: red[700],\n    fontWeight: 'bold'\n  }\n}));\n\nexport function HistoryScreen() {\n  const records = useStore($records);\n  const classes = useStyles();\n  return records.map(record => (\n    <div key={record.added}>\n      <Typography align=\"center\">\n        {new Date(record.added).toLocaleDateString()}, {new Date(record.added).toLocaleTimeString()}\n      </Typography>\n      <Typography\n        align=\"center\"\n        className={\n          record.type === RECORD_TYPE.EXPENSE\n            ? classes.spendingText\n            : classes.incomeText\n        }\n        variant=\"subtitle2\"\n      >\n        {record.type === RECORD_TYPE.EXPENSE && '- '}\n        {record.value}\n      </Typography>\n      <Divider />\n    </div>\n  ));\n}\n","import React from 'react';\nimport { Router, Switch, Route, Redirect } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport { HomePage } from './screens/home';\nimport { AddRecordScreen } from './screens/add-record';\nimport { BottomNavigation } from './components/bottom-navigation';\nimport { HistoryScreen } from './screens/history';\n\nexport const history = createBrowserHistory();\n\nexport const Routes = () => (\n  <Router history={history} baseName={process.env.PUBLIC_URL}>\n    <Switch>\n      <Route exact path=\"/add-record\">\n        <AddRecordScreen />\n      </Route>\n      <Route exact path=\"/history\">\n        <HistoryScreen />\n      </Route>\n      <Route exact path=\"/\">\n        <HomePage />\n      </Route>\n      <Redirect to=\"/\" />\n    </Switch>\n    <BottomNavigation />\n  </Router>\n);\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport { Routes } from './routes';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    overflow: 'auto',\r\n    padding: theme.spacing()\r\n  }\r\n}));\r\n\r\nexport function App() {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <Routes />\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './app';\nimport './styles.css';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core';\n\nconst rootElement = document.getElementById('root');\n\nconst theme = createMuiTheme();\nconst Root = () => (\n  <ThemeProvider theme={theme}>\n    <App />\n  </ThemeProvider>\n);\nReactDOM.render(<Root />, rootElement);\n"],"sourceRoot":""}